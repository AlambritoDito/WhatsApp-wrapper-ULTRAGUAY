# Repository Guidelines

## Project Structure & Module Organization
- `src/`: TypeScript source.
  - `send/` message senders, `receive/` webhook server & parser, `http/` Axios client + retry, `config/` env/meta config, `types/` shared types, `utils/` helpers (e.g., signature verification).
- `tests/`: Jest tests (`*.test.ts`).
- `scripts/`: Local examples and debug tools (e.g., `quickStart.ts`, `server.ts`).
- `dist/`: Build output (generated by `tsc`).
- `.env.example` template; keep secrets out of VCS.

## Build, Test, and Development Commands
- `npm run build`: Compile TypeScript to `dist/` via `tsc -p tsconfig.build.json`.
- `npm run dev`: Run `src/index.ts` with hot-reload (`ts-node-dev`).
- `npm test`: Run Jest tests matching `tests/**/*.ts`.
- `npm run clean`: Remove `dist/`.
- Note: `prepare` builds on install (useful when publishing/consuming).

## Coding Style & Naming Conventions
- Language: TypeScript (Node >= 16), strict mode enabled.
- Indentation: 2 spaces; include semicolons.
- Files/functions: `camelCase` (e.g., `sendText.ts`), types/interfaces: `PascalCase`.
- Constants and env-derived config: `SCREAMING_SNAKE_CASE` in `src/config/`.
- Keep modules small, typed, and exported via `src/index.ts`. No ESLint/Prettier configured; match existing style.

## Testing Guidelines
- Framework: Jest + `ts-jest` (`jest.config.js`).
- Location & pattern: `tests/*.test.ts` or `tests/**/**/*.ts`.
- Example: `npx jest tests/sendText.test.ts -t "posts correct payload"`.
- Mock external I/O (e.g., `httpClient`) and focus on behavior/shape.
- No coverage threshold enforced; add/extend tests with feature changes.

## Commit & Pull Request Guidelines
- Prefer Conventional Commits (`feat:`, `fix:`, `docs:`, `chore:`). Use English for consistency.
- PRs must: describe the change, link issues, include usage or screenshots when relevant, update `README.md`/`DOCUMENTATION.md`, add/adjust tests, and pass `npm test`.
- Do not commit secrets or `.env`.

## Security & Configuration Tips
- Required env vars: `META_TOKEN`, `PHONE_NUMBER_ID`, `APP_SECRET`, `WEBHOOK_SECRET` (see `src/config/metaConfig.ts`).
- Keep webhook verification intact (`utils/verifySignature.ts`); preserve raw body in middleware.
- Use `ALLOW_UNSIGNED_TESTS=true` only for local debugging; never in production.
